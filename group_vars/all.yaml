nginx_port: 80
nginx_sites_dir: /etc/nginx/sites-enabled

agama_host_port: 8001
agama_container_port: 8000
agama_dir: /opt/agama
agama_urls:
  - https://raw.githubusercontent.com/hudolejev/agama/master/agama.py
  - https://raw.githubusercontent.com/hudolejev/agama/master/Dockerfile
agama_docker_image_name: agama
agama_docker_container_name: agama
agama_container_config_root_dir: /opt/agama

mysql_host: rovilu-2
mysql_agama_db: agama
mysql_agama_user: agama
mysql_agama_password: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  65613734633365323836663139326364633733333034336535363631656334356463333932653635
  6666656430313635643733306462326332366566616639660a326564666166373564326237353038
  38323539386131643333653639656539633664306136333061396232316638306439336465616666
  3935393663383733620a366539343836623764343633313465613861356631376433323666306535
  61613235326263643338623264333961643838643562326535313439376634376237
mysql_socket: /var/run/mysqld/mysqld.sock
mysql_replication_user: replication
mysql_replication_password: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  30386464656434326662346436303836376630663337633666386636303064346138343863643135
  3265386236306231653861613361663036343865643331300a303332636265346262633864393763
  62303765616335336135643335653566363436626239306465346266623164636231616532636338
  3361316564656161350a393836656536343639373861636462376239323366636666663431656132
  65353161353630613436363763313536333262363762656537643836366134633764343562356662
  3064333030626638643033623439376465346364613331346464
mysql_backup_host: "{{ groups['db_servers'] | reject('eq', mysql_host) | first | default(mysql_host) }}"
node_id: "{{ (ansible_port / 100) | int }}"

bind_db_file: /var/cache/bind/db.{{ bind_domain }}
bind_db_ptr_file: /var/cache/bind/db.{{ bind_ptr_domain }}
bind_transfer_key_name: transfer.key
bind_nsupdate_key_name: nsupdate.key
bind_master_host: rovilu-2
bind_domain: vilur.io
bind_ptr_domain: 168.192.in-addr.arpa
bind_allow_query: 192.168.42.0/23; 127.0.0.0/8;
bind_forwarders: 1.1.1.1; 8.8.8.8; 9.9.9.9; 9.9.9.10;
bind_records:
  - { name: backup, host: "{{ backup_host_ip }}", type: "A" }
  - { name: grafana, host: rovilu-2, type: "CNAME" }
  - { name: influxdb, host: rovilu-2, type: "CNAME" }
  - { name: lb1, host: rovilu-1, type: "CNAME" }
  - { name: lb2, host: rovilu-2, type: "CNAME" }
  - { name: mysql1, host: rovilu-1, type: "CNAME" }
  - { name: mysql2, host: rovilu-2, type: "CNAME" }
  - { name: ns1, host: rovilu-1, type: "CNAME" }
  - { name: ns2, host: rovilu-2, type: "CNAME" }
  - { name: prometheus, host: rovilu-2, type: "CNAME" }
  - { name: web1, host: rovilu-1, type: "CNAME" }
  - { name: web2, host: rovilu-2, type: "CNAME" }
bind_transfer_key_secret: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  64343935626138346334646263313136663338613238666532323133633735383034643462643232
  3664643936313838656138353461363931306432623030330a623663656637356138636235323839
  64353136623565326662346539636630366161376131656165343233316566346631643335346238
  3337623935663566640a363565373032313131343935636532396666643633383032323535363034
  33316664383937396464386665363663646664633164613533363037383738383339333835623939
  3562333338356561353461353463333464316666646139306334
bind_nsupdate_key_secret: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  35353864393930646562653437333638653838386234613032373964353964383735623036633134
  3233373937353162313533653638333866333034636535650a633638323064396266366565303665
  66663838396135643464366438623438326432636366343262366434313037333930396363306566
  6361616262623865360a663532306363323536653766313331623963396236356534346439373837
  31343838353839393037363331623562366161356363366432643230306461393664353831346666
  3639616365316563316566343637633363333934386164333332

cron_dir: /etc/cron.d

backup_host_ip: 192.168.42.132
backup_host: backup
backup_host_fqdn: "{{ backup_host }}.{{ bind_domain }}"
backup_host_ssh_key: ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIEu6pFFWyuRrl4WGFPQGElYN9txwTGm2wSntcpVAaN90
backup_host_user: rovilu
backup_user: backup
backup_user_home: /home/{{ backup_user }}
backup_user_home_mysql: "{{ backup_user_home }}/mysql"
backup_user_home_restore: "{{ backup_user_home }}/restore"
backup_user_home_influxdb: "{{ backup_user_home }}/influxdb"
backup_user_home_restore_mysql: "{{ backup_user_home_restore }}/mysql"
backup_user_home_restore_influxdb: "{{ backup_user_home_restore }}/influxdb"
backup_password: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  30333539306632386436303835666532623763383931303336353964363634653861343338396338
  3332613139346563393165396236383336343934663133320a356234306633306265643161353139
  61353134343434316632303732313463306566626461303332376536346563643038616466646532
  3966346266316437620a353437306566393536373638313030633862386663343337376266323536
  63346133333565653634396166313866613466313065306238316665316130363536653430356430
  3530313262303864356139356539366533336532376631613231
backup_mysql_cron_file: "{{ cron_dir }}/mysql-backup"
backup_mysql_dump: rm -rf {{ backup_user_home_mysql }}/* && mysqldump {{ mysql_agama_db }} > {{ backup_user_home_mysql }}/{{ mysql_agama_db }}.sql
backup_mysql_job: "{{ backup_mysql_dump }} && duplicity --no-encryption {{ item }} {{ backup_user_home_mysql }} rsync://{{ backup_host_user }}@{{ backup_host_fqdn }}/mysql"
backup_influxdb_cron_file: "{{ cron_dir }}/influxdb-backup"
backup_influxdb_dump: rm -rf {{ backup_user_home_influxdb }}/* && influxd backup -portable -database {{ influxdb_db }} {{ backup_user_home_influxdb }}
backup_influxdb_job: "{{ backup_influxdb_dump }} && duplicity --no-encryption {{ item }} {{ backup_user_home_influxdb }} rsync://{{ backup_host_user }}@{{ backup_host_fqdn }}/influxdb"

monitoring_host: "{{ hostvars['rovilu-2']['ansible_host'] }}"
monitoring_host_port: 5480
monitoring_host_int: "{{ hostvars['rovilu-2']['ansible_default_ipv4']['address'] }}"

prometheus_host: "{{ monitoring_host }}"
prometheus_host_int: "{{ monitoring_host_int }}"
prometheus_host_port: "{{ monitoring_host_port }}"
prometheus_service_port: 9090
prometheus_user: prometheus

monitoring_docker_host_address: 172.17.0.1

grafana_host: "{{ monitoring_host }}"
grafana_host_int: "{{ monitoring_host_int }}"
grafana_host_port: "{{ monitoring_host_port }}"
grafana_url: "http://{{ grafana_host }}:{{ grafana_host_port }}/grafana"
grafana_service_port: 3001
grafana_container_port: 3000
grafana_user: admin
grafana_email: "{{ grafana_user }}@localhost"
grafana_password: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  65396261343562323164363263643032613165396335636661333137643730323936386336663363
  3764623766633332393231623334303537346130393235300a306662383831313838323836366566
  36323937333334303037313863613935336134316462326264353339363662393362616165613136
  6639326261633466350a343261383532636462393566616563643435633562353536656136636265
  61613032326235653233323235303063623866623638343934653262636665353031

grafana_docker_container_name: grafana
grafana_docker_container_image: grafana/grafana
grafana_container_config_root_dir: /etc/grafana
grafana_container_config_provisioning_dir: "{{ grafana_container_config_root_dir }}/provisioning"
grafana_container_config_dashboards_dir: "{{ grafana_container_config_provisioning_dir }}/dashboards"
grafana_container_config_datasources_dir: "{{ grafana_container_config_provisioning_dir }}/datasources"
grafana_config_root_dir: /opt/grafana
grafana_config_provisioning_dir: "{{ grafana_config_root_dir }}/provisioning"
grafana_config_dashboards_dir: "{{ grafana_config_provisioning_dir }}/dashboards"
grafana_config_datasources_dir: "{{ grafana_config_provisioning_dir }}/datasources"

grafana_dirs:
  - "{{ grafana_config_dashboards_dir }}"
  - "{{ grafana_config_datasources_dir }}"
grafana_resources:
  - { src: main.json, dest: "{{ grafana_config_dashboards_dir }}/" }
  - { src: mysql.json, dest: "{{ grafana_config_dashboards_dir }}/" }
  - { src: syslog.json, dest: "{{ grafana_config_dashboards_dir }}/" }
grafana_configs:
  - { src: dashboards.yml, dest: "{{ grafana_config_dashboards_dir }}/" }
  - { src: datasources.yml, dest: "{{ grafana_config_datasources_dir }}/" }
  - { src: grafana.ini, dest: "{{ grafana_config_root_dir }}/" }

node_exporter_port: 9100
nginx_exporter_port: 9113
bind_exporter_port: 9119
mysql_exporter_port: 9104
mysql_exporter_password: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  62393962376534333933316161303863346364653535653863656664336331343134353765613237
  6533383531656662656534366533626136613465623730330a623835643130333765373663363261
  38623130633261386331393832343632646637616139306230623431323466633439323434613763
  3633616463363033660a303962653237383734323962383763343639633834623061353334626630
  63663765363765386339343635623537333864626165613563303864666366363938
pinger_user: pinger
influxdb_host_int: "{{ monitoring_host_int }}"
influxdb_db: telegraf
influxdb_port: 8086
syslog_port: 6514

keepalived_conf_name: keepalived.conf
keepalived_user: keepalived_script
keepalived_healthcheck_script_name: healthcheck.sh
keepalived_config_root_dir: /etc/keepalived
keepalived_script_user_home_dir: /home/keepalived_script
keepalived_exporter_binary_dir_name: keepalived-exporter-1.2.0.linux-amd64
keepalived_exporter_binary_archive_name: "{{ keepalived_exporter_binary_dir_name }}.tar.gz"
keepalived_exporter_binary_archive_path: /opt/{{ keepalived_exporter_binary_archive_name }}
keepalived_exporter_binary_dir_path: /opt/{{ keepalived_exporter_binary_dir_name }}
keepalived_exporter_binary_url: http://backup/{{ keepalived_exporter_binary_archive_name }}
keepalived_exporter_binary_name: prometheus-keepalived-exporter
keepalived_exporter_service_name: prometheus-keepalived-exporter
keepalived_exporter_user: root
keepalived_exporter_port: 9165

haproxy_stats_port: 9188
haproxy_conf_name: haproxy.cfg
haproxy_config_root_dir: /etc/haproxy
haproxy_exporter_port: 9101

bin_dir: /usr/local/bin
systemd_dir: /etc/systemd/system
